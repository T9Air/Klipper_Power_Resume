[gcode_shell_command unlog_path]
command: sh /home/USER/Klipper_Power_Resume/unlog.sh
timeout: 30.
verbose: False

[gcode_macro UNLOG_FILE]
gcode: 
    RUN_SHELL_COMMAND CMD=unlog_path PARAMS="{printer.virtual_sdcard.file_path}"

[gcode_shell_command log_path]
command: sh /home/USER/Klipper_Power_Resume/log.sh
timeout: 30.
verbose: False

[gcode_macro LOG_FILE]
gcode:
    {% set position = printer.gcode_move.gcode_position %}
    RUN_SHELL_COMMAND CMD=log_path PARAMS="{position.x} {position.y} {position.z}"

[gcode_shell_command print_finished]
command: sh /home/USER/Klipper_Power_Resume/finished.sh
timeout: 30.
verbose: False

[gcode_macro LOG_FINISHED]
gcode:
    RUN_SHELL_COMMAND CMD=print_finished