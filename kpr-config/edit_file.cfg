[gcode_shell_command add_logs]
command: bash /home/USER/PRINTER/config/kpr-config/add_logs.sh
timeout: 300.0
verbose: True

[gcode_macro ADD_LOGS]
description: Add logging commands to a G-code file
gcode:
    {% set filename = params.FILENAME|default(None) %}
    {% set line_based = params.LINE_BASED|default("yes") %}
    {% set lines = params.LINES|default("5") %}
    
    {% if filename %}
        RUN_SHELL_COMMAND CMD=add_logs PARAMS="{filename} {line_based} {lines}"
    {% else %}
        RESPOND TYPE=error MSG="No filename provided. Usage: ADD_LOGS FILENAME=my_print.gcode [LINE_BASED=yes|no] [LINES=5]"
    {% endif %}